# =============================================================================
# DOCUMENT IMAGE SEARCH - CENTRALIZED CONFIGURATION
# =============================================================================
# This file contains all configuration options for both projects:
# - pdf_import: PDF extraction and Elasticsearch ingestion
# - knowledge_agent: AI agent for document question answering
#
# Copy this file to .env in the project root and update with your values.
# Each project will automatically use these settings if present.
# =============================================================================

# -----------------------------------------------------------------------------
# AI Provider Configuration (for knowledge_agent)
# -----------------------------------------------------------------------------
# Choose your AI provider: 'anthropic' or 'openai'
AI_PROVIDER=anthropic

# Anthropic API Configuration (if using Anthropic Claude)
ANTHROPIC_API_KEY=your_anthropic_api_key_here
ANTHROPIC_MODEL=claude-sonnet-4-5-20250929

# OpenAI API Configuration (if using OpenAI GPT)
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_MODEL=gpt-4-turbo-preview

# Agent Configuration
MAX_TOKENS=4096
TEMPERATURE=0.7

# -----------------------------------------------------------------------------
# Elasticsearch Configuration (shared by pdf_import and document_search_tool)
# -----------------------------------------------------------------------------
# Elasticsearch instance URL
ELASTICSEARCH_HOST=http://localhost:9200
ELASTIC_URL=http://localhost:9200

# Authentication - Use EITHER API key OR username/password
ELASTICSEARCH_API_KEY=
ELASTIC_API_KEY=

# OR use basic authentication
ELASTICSEARCH_USERNAME=
ELASTICSEARCH_PASSWORD=

# Index configuration
ELASTICSEARCH_INDEX=pdf_documents
ELASTIC_INDEX=pdf_documents

# Inference endpoint ID for embeddings
ELASTICSEARCH_INFERENCE_ID=my_e5_model
INFERENCE_ID=my_e5_model

# SSL/TLS Configuration (optional)
ELASTICSEARCH_VERIFY_CERTS=true
ELASTICSEARCH_CA_CERTS=

# Request timeout (seconds) - default 300 (5 minutes)
ELASTICSEARCH_TIMEOUT=300

# -----------------------------------------------------------------------------
# LM Studio Configuration (for image captioning)
# -----------------------------------------------------------------------------
# LM Studio API endpoint for vision models
LM_STUDIO_URL=http://localhost:1234/v1/chat/completions
LMSTUDIO_BASE_URL=http://localhost:1234/v1
LM_STUDIO_ENABLED=true

# LM Studio model name
LMSTUDIO_MODEL=qwen/qwen3-vl-8b

# -----------------------------------------------------------------------------
# Image Analysis Configuration (for image_mcp_service)
# -----------------------------------------------------------------------------
# Provider for image analysis: "lmstudio" or "openai"
PROVIDER=lmstudio

# OpenAI Base URL (optional, for custom endpoints)
OPENAI_BASE_URL=https://api.openai.com/v1

# Default settings for image analysis
DEFAULT_MAX_TOKENS=1000
DEFAULT_TEMPERATURE=0.7

# -----------------------------------------------------------------------------
# PDF Processing Configuration
# -----------------------------------------------------------------------------
# DPI for rendering PDF pages to images
PDF_RENDER_DPI=150

# -----------------------------------------------------------------------------
# MCP Server Configuration (for knowledge_agent)
# -----------------------------------------------------------------------------
# Paths to MCP servers - update these to match your setup

# Elastic Search MCP Server
ELASTIC_SEARCH_MCP_COMMAND=python
ELASTIC_SEARCH_MCP_ARGS=/path/to/document_image_search/knowledge_agent/document_search_tool/server.py

# Image Analysis MCP Server
IMAGE_ANALYSIS_MCP_COMMAND=python
IMAGE_ANALYSIS_MCP_ARGS=/path/to/document_image_search/knowledge_agent/image_mcp_service/server.py

# -----------------------------------------------------------------------------
# System Prompt (for knowledge_agent)
# -----------------------------------------------------------------------------
# Customize the agent's behavior and instructions
SYSTEM_PROMPT=You are a helpful AI assistant that answers questions about documents. Follow these steps: 1) Use the search_documents tool to find relevant documents. 2) If search results include an 'Image Path' field, use the analyze_image tool with the image_path parameter to examine the image. 3) If search results include an 'Image URL' field, use the analyze_image_url tool with the image_url parameter. 4) Synthesize information from both document content and image analysis to provide a comprehensive answer.
